# アプリ環境を定義する場所
setup:
# アプリ作成時にアドオンを自動で追加する
  addons:
    - plan: heroku-postgresql
    # 環境変数を指定する
  config:
  # RACK：HTTP送受信を担当するモジュール
  # productionで本番環境であると示す
    RACK_ENV: production
    RAILS_ENV: production
    # log出力のフラグ（enabled→出力する）
    RAILS_LOG_TO_STDOUT: enabled
    # publicディレクトリからの静的ファイルを提供してもらうかのフラグ（enabled→提供してもらう）
    RAILS_SERVE_STATIC_FILES: enabled
    # ビルドを定義する場所
build:
# 参照するdockerfileの場所
  docker:
    web: Dockerfile
    # ビルド時にdockerfileに渡す環境変数を指定
  config:
    WORKDIR: app
    # プロセスを定義
run:
  web: bundle exec puma -C config/puma.rb